<div class="row">
  <div ng-show="err" class="col-xs-12">
    <div class="alert alert-danger">
      {{err}}
    </div>
  </div>
    <div class="col-xs-6" ng-hide="timeTracked">
    <h2>Insert the month name</h2>
    <p>This field is mandatory</p>
    <input type="text" class="form-control" ng-model="monthName">
  </div>
  <div class="col-xs-6" ng-hide="timeTracked">
    <h2>Select a .csv file</h2>
    <p>This has to be generated with Caato Time Traker</p>
    <input type="file" class="form-control" on-read-file="showContent($fileContent)" />
  </div>
</div>
<div class="row">
  <div class="col-xs-12">
  <!-- Repeating History -->
    <div class="well" ng-repeat="month in history">
      <div class="row" ng-click="toggleMonth(month.name)">
        <div class="col-xs-6">{{month.name}}</div>
        <div class="col-xs-6">{{month.timeWorked | intToHours}}</div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="row" ng-repeat="(pkey, pvalue) in month.projectList" ng-show="selectedMonth == month.name">
            <div class="col-xs-11 col-xs-offset-1" ng-click="toggleProject(pkey)">
              {{pkey}} {{pvalue.total | intToHours}}
            </div>
            <div class="col-xs-10 col-xs-offset-2" ng-repeat="(tkey, tvalue) in pvalue" ng-if="tkey != 'total'" ng-show="selectedProject == pkey">
              <b>{{tkey}}</b> {{tvalue | intToHours}} h
            </div>
          </div>
        </div>
      </div>
    </div>
  <!-- Repeating History -->
  </div>
</div>
<div class="row">
  <div class="col-xs-12" ng-show="timeTracked">
    <div class="row">
      <div class="col-xs-12 text-center">
        <h3>Total Worked: <span class="label label-primary">{{grandTotal | intToHours}} h</span></h3>
      </div>
    </div>
    <div  ng-repeat="(pkey, pvalue) in totalProject" ng-if="pvalue.total > 0" class="row text-center" style="margin-bottom: 20px">
      <div class="col-sm-3">{{pkey}} {{pvalue.total | intToHours}}</div>
      <div class="col-sm-9">
        <div ng-repeat="(key, value) in pvalue" ng-if="key != 'total'" class="label label-primary" style="margin-right: 10px">
          <b>{{key}}</b> {{value | intToHours}} h
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <div class="row" ng-repeat="(key, value) in dailyResume | orderBy: key" ng-if="key && key != 'undefined'">
        <div class="col-xs-8">
          {{key}}
        </div>
        <div class="col-xs-4">
          <div class="label label-primary">
            {{value | intToHours}}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div ng-show="timeTracked" class="col-xs-12">
    <a ng-click="details = !details" ng-init="details = false" class="btn btn-primary">
      Toggle details
    </a>
    <table class="table table-striped" ng-show="details">
      <tr>
        <td>#</td>
        <td>Project</td>
        <td>Task</td>
        <td>Start</td>
        <td>End</td>
        <td>Hours</td>
      </tr>
      <tr ng-repeat="item in timeTracked track by item.id">
        <td>{{item.id}}</td>
        <td>{{item.PROJECT}}</td>
        <td>{{item.TASK}}</td>
        <td>{{item.START}}</td>
        <td>{{item.END}}</td>
        <td>{{item.HOURS}}</td>
      </tr>
    </table>
  </div>
</div>